<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="referrer" content="no-referrer">
    <title>ツーの無限ステルスポータル</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #0f0f0f; color: #00ff41; padding: 20px; }
        .console { background: #000; border: 1px solid #00ff41; padding: 20px; border-radius: 10px; box-shadow: 0 0 15px #00ff41; max-width: 900px; margin: auto; }
        input { width: 70%; padding: 12px; background: #111; border: 1px solid #00ff41; color: #00ff41; border-radius: 5px; outline: none; }
        button { padding: 12px 25px; background: #00ff41; color: #000; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        #results { margin-top: 20px; text-align: left; }
        .result-item { border-bottom: 1px solid #333; padding: 15px; }
        .result-item a { color: #00ff41; font-size: 18px; text-decoration: none; }
        .result-item a:hover { text-decoration: underline; }
        .desc { color: #888; font-size: 14px; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="console">
        <h1>UNGOOGLED STEALTH SEARCH v3.0</h1>
        <p>> i-FILTER BYPASS: ACTIVE | TARGET: deta (D:ドライブ)</p>
        <input type="text" id="q" placeholder="Enter query..." onkeydown="if(event.key==='Enter') executeStealth()">
        <button onclick="executeStealth()">SEARCH</button>
        <div id="results"></div>
    </div>

    <script>
        // 飛び先をすべて「Google翻訳の皮」の中に閉じ込める関数
        function wrapInStealth(targetUrl) {
            // translate.google.com をプロキシとして使い、サイト内の移動もすべてこのドメイン内に固定する
            return "https://translate.google.com/translate?sl=auto&tl=ja&u=" + encodeURIComponent(targetUrl);
        }

        async function executeStealth() {
            const query = document.getElementById('q').value;
            const resDiv = document.getElementById('results');
            resDiv.innerHTML = "> Analyzing packets...";

            const proxy = 'https://api.allorigins.win/get?url=';
            const target = `https://duckduckgo.com/html/?q=${encodeURIComponent(query)}`;
            
            try {
                const response = await fetch(proxy + encodeURIComponent(target));
                const data = await response.json();
                const parser = new DOMParser();
                const doc = parser.parseFromString(data.contents, 'text/html');
                const links = doc.querySelectorAll('.result__a');
                const snippets = doc.querySelectorAll('.result__snippet');
                
                resDiv.innerHTML = "";
                links.forEach((link, i) => {
                    const div = document.createElement('div');
                    div.className = 'result-item';
                    
                    // すべてのリンクを「Google翻訳プロキシ」経由に書き換え
                    const stealthUrl = wrapInStealth(link.href);
                    
                    div.innerHTML = `
                        <a href="${stealthUrl}" target="_blank" rel="noreferrer">${link.innerText}</a>
                        <div class="desc">${snippets[i] ? snippets[i].innerText : ''}</div>
                    `;
                    resDiv.appendChild(div);
                });
            } catch (e) {
                resDiv.innerHTML = "> Error: Connection reset by peer. Retry.";
            }
        }
    </script>
</body>
</html>
